"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[350],{8350:(q,m,l)=>{l.r(m),l.d(m,{FrogotPasswordComponent:()=>S});var a=l(6895),i=l(433),c=l(529),e=l(1571);let p=(()=>{class s{constructor(t){this._HttpClient=t,this.baseUrl="https://ecommerce.routemisr.com/api/v1/auth/"}forgotPassword(t){return this._HttpClient.post(this.baseUrl+"forgotPasswords",t)}resetCode(t){return this._HttpClient.post(this.baseUrl+"verifyResetCode",t)}resetPassword(t){return this._HttpClient.put(this.baseUrl+"resetPassword",t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(c.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var u=l(4349),_=l(2018);function g(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," Email is required "),e.qZA())}function f(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," Email is inValid "),e.qZA())}function w(s,n){if(1&s&&(e.TgZ(0,"div",9),e.YNc(1,g,2,0,"p",10),e.YNc(2,f,2,0,"p",10),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.sendEmailForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.sendEmailForm.get("email"))?null:r.getError("email"))}}function F(s,n){1&s&&e._UZ(0,"i",12)}function C(s,n){1&s&&(e.TgZ(0,"span"),e._uU(1,"Send Email"),e.qZA())}const d=function(s,n){return{"is-invalid":s,"is-valid":n}};function x(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"section")(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handlesendEmailForm(r.sendEmailForm))}),e.TgZ(2,"h3",3),e._uU(3,"Send Your Email"),e.qZA(),e.TgZ(4,"label",4),e._uU(5,"Email:"),e.qZA(),e._UZ(6,"input",5),e.YNc(7,w,3,2,"div",6),e.TgZ(8,"button",7),e.YNc(9,F,1,0,"i",8),e.YNc(10,C,2,0,"span",1),e.qZA()()()}if(2&s){const t=e.oxw();let o,r;e.xp6(1),e.Q6J("formGroup",t.sendEmailForm),e.xp6(5),e.Q6J("ngClass",e.WLB(6,d,(null==(o=t.sendEmailForm.get("email"))?null:o.invalid)&&(null==(o=t.sendEmailForm.get("email"))?null:o.touched),(null==(o=t.sendEmailForm.get("email"))?null:o.valid)&&(null==(o=t.sendEmailForm.get("email"))?null:o.touched))),e.xp6(1),e.Q6J("ngIf",(null==(r=t.sendEmailForm.get("email"))?null:r.errors)&&(null==(r=t.sendEmailForm.get("email"))?null:r.touched)),e.xp6(1),e.Q6J("disabled",t.sendEmailForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function h(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," resetCode is required "),e.qZA())}function P(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," resetCode is inValid "),e.qZA())}function v(s,n){if(1&s&&(e.TgZ(0,"div",9),e.YNc(1,h,2,0,"p",10),e.YNc(2,P,2,0,"p",10),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetCodeForm.get("resetCode"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetCodeForm.get("resetCode"))?null:r.getError("resetCode"))}}function T(s,n){1&s&&e._UZ(0,"i",12)}function Z(s,n){1&s&&(e.TgZ(0,"span"),e._uU(1,"Send resetCode"),e.qZA())}function J(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"section")(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleresetCodeForm(r.resetCodeForm))}),e.TgZ(2,"h3",3),e._uU(3,"Verify Reset Code"),e.qZA(),e.TgZ(4,"label",4),e._uU(5,"ResetCode:"),e.qZA(),e._UZ(6,"input",13),e.YNc(7,v,3,2,"div",6),e.TgZ(8,"button",7),e.YNc(9,T,1,0,"i",8),e.YNc(10,Z,2,0,"span",1),e.qZA()()()}if(2&s){const t=e.oxw();let o,r;e.xp6(1),e.Q6J("formGroup",t.resetCodeForm),e.xp6(5),e.Q6J("ngClass",e.WLB(6,d,(null==(o=t.resetCodeForm.get("resetCode"))?null:o.invalid)&&(null==(o=t.resetCodeForm.get("resetCode"))?null:o.touched),(null==(o=t.resetCodeForm.get("resetCode"))?null:o.valid)&&(null==(o=t.resetCodeForm.get("resetCode"))?null:o.touched))),e.xp6(1),e.Q6J("ngIf",(null==(r=t.resetCodeForm.get("resetCode"))?null:r.errors)&&(null==(r=t.resetCodeForm.get("resetCode"))?null:r.touched)),e.xp6(1),e.Q6J("disabled",t.resetCodeForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function N(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," new Password is required "),e.qZA())}function I(s,n){1&s&&(e.TgZ(0,"p",11),e._uU(1," new Password is inValid "),e.qZA())}function b(s,n){if(1&s&&(e.TgZ(0,"div",9),e.YNc(1,N,2,0,"p",10),e.YNc(2,I,2,0,"p",10),e.qZA()),2&s){const t=e.oxw(2);let o,r;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetpasswordForm.get("newPassword"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=t.resetpasswordForm.get("newPassword"))?null:r.getError("newPassword"))}}function E(s,n){1&s&&e._UZ(0,"i",12)}function Q(s,n){1&s&&(e.TgZ(0,"span"),e._uU(1,"Send new Password"),e.qZA())}function U(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"section")(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleresetpasswordForm())}),e.TgZ(2,"h3",3),e._uU(3,"New Password"),e.qZA(),e.TgZ(4,"label",4),e._uU(5,"New Password:"),e.qZA(),e._UZ(6,"input",14),e.YNc(7,b,3,2,"div",6),e.TgZ(8,"button",7),e.YNc(9,E,1,0,"i",8),e.YNc(10,Q,2,0,"span",1),e.qZA()()()}if(2&s){const t=e.oxw();let o,r;e.xp6(1),e.Q6J("formGroup",t.resetpasswordForm),e.xp6(5),e.Q6J("ngClass",e.WLB(6,d,(null==(o=t.resetpasswordForm.get("newPassword"))?null:o.invalid)&&(null==(o=t.resetpasswordForm.get("newPassword"))?null:o.touched),(null==(o=t.resetpasswordForm.get("newPassword"))?null:o.valid)&&(null==(o=t.resetpasswordForm.get("newPassword"))?null:o.touched))),e.xp6(1),e.Q6J("ngIf",(null==(r=t.resetpasswordForm.get("newPassword"))?null:r.errors)&&(null==(r=t.resetpasswordForm.get("newPassword"))?null:r.touched)),e.xp6(1),e.Q6J("disabled",t.resetpasswordForm.invalid),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}let S=(()=>{class s{constructor(t,o,r){this._Router=t,this._ToastrService=o,this._ForgetPasswordService=r,this.isLoading=!1,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.sendEmailForm=new i.cw({email:new i.NI(null,[i.kI.required,i.kI.email])}),this.resetCodeForm=new i.cw({resetCode:new i.NI(null,[i.kI.required])}),this.resetpasswordForm=new i.cw({newPassword:new i.NI(null,[i.kI.required,i.kI.pattern(/^[A-Za-z0-9]{6,15}$/)])})}handlesendEmailForm(t){this._ForgetPasswordService.forgotPassword(t.value).subscribe({next:o=>{"success"===o.statusMsg&&(console.log(o),console.log(t.value),this._ToastrService.success(o.message),this.step1=!1,this.step2=!0,this.isLoading=!1,this.email=t.value.email,console.log(this.email))},error:o=>{this._ToastrService.success(o.error.message)}})}handleresetCodeForm(t){this._ForgetPasswordService.resetCode(t.value).subscribe({next:o=>{console.log(o),this._ToastrService.success("Plaese Enter New Password"),this.step2=!1,this.step3=!0,this.isLoading=!1},error:o=>{this._ToastrService.success(o.error.message)}})}handleresetpasswordForm(){let t=this.resetpasswordForm.value;t.email=this.email,console.log(t),this._ForgetPasswordService.resetPassword(t).subscribe({next:o=>{console.log(o),o?.token&&(localStorage.setItem("userToken",o.token),this._ToastrService.success("Welcome Back again "),this._Router.navigate(["home"]))}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.F0),e.Y36(_._W),e.Y36(p))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-frogot-password"]],standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[1,"text-center","text-uppercase","fw-bold","txt-color","text-decoration-underline"],[4,"ngIf"],[1,"mx-auto","my-5","form-login","bg-color","txt",3,"formGroup","ngSubmit"],[1,"title"],["for","email",1,"fw-bold","txt-color"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control","my-2",3,"ngClass"],["class","alert alert-danger p-1",4,"ngIf"],["type","submit",1,"btn","bg-main","text-white","d-block","mx-auto","mt-3",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger","p-1"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"],[1,"fa","fa-spinner","fa-spin"],["type","text","id","resetCode","placeholder","resetCode","formControlName","resetCode",1,"form-control","my-2",3,"ngClass"],["type","password","id","newPassword","placeholder","New Password","formControlName","newPassword",1,"form-control","my-2",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Reset Password"),e.qZA(),e.YNc(2,x,11,9,"section",1),e.YNc(3,J,11,9,"section",1),e.YNc(4,U,11,9,"section",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.step1),e.xp6(1),e.Q6J("ngIf",o.step2),e.xp6(1),e.Q6J("ngIf",o.step3))},dependencies:[a.ez,a.mk,a.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),s})()}}]);