"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[143],{7143:(x,_,a)=>{a.r(_),a.d(_,{LoginComponent:()=>w});var p=a(6895),l=a(433),m=a(4349),n=a(1571),c=a(4377),f=a(2018);function h(o,r){if(1&o&&(n.TgZ(0,"div",15)(1,"p",16),n._uU(2),n.qZA()()),2&o){const i=n.oxw();n.xp6(2),n.Oqu(i.apiError)}}function v(o,r){1&o&&(n.TgZ(0,"p",19),n._uU(1," Email is required "),n.qZA())}function T(o,r){1&o&&(n.TgZ(0,"p",19),n._uU(1," Email is inValid "),n.qZA())}function L(o,r){if(1&o&&(n.TgZ(0,"div",17),n.YNc(1,v,2,0,"p",18),n.YNc(2,T,2,0,"p",18),n.qZA()),2&o){const i=n.oxw();let e,t;n.xp6(1),n.Q6J("ngIf",null==(e=i.loginForm.get("email"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(t=i.loginForm.get("email"))?null:t.getError("email"))}}function Z(o,r){1&o&&(n.TgZ(0,"p",19),n._uU(1," Password is required "),n.qZA())}function E(o,r){1&o&&(n.TgZ(0,"p",19),n._uU(1," must be "),n._UZ(2,"br"),n._uU(3," * Be between 6 and 15 characters in total. "),n._UZ(4,"br"),n._uU(5," * Can only contain letters (A-Z or a-z) and numbers (0-9) "),n.qZA())}function A(o,r){if(1&o&&(n.TgZ(0,"div",17),n.YNc(1,Z,2,0,"p",18),n.YNc(2,E,6,0,"p",18),n.qZA()),2&o){const i=n.oxw();let e,t;n.xp6(1),n.Q6J("ngIf",null==(e=i.loginForm.get("password"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(t=i.loginForm.get("password"))?null:t.getError("pattern"))}}function C(o,r){1&o&&n._UZ(0,"i",20)}function I(o,r){1&o&&(n.TgZ(0,"span"),n._uU(1,"Login"),n.qZA())}const d=function(o,r){return{"is-invalid":o,"is-valid":r}};let w=(()=>{class o{constructor(i,e,t){this._AuthService=i,this._Router=e,this._ToastrService=t,this.isLoading=!1,this.apiError=null,this.loginForm=new l.cw({email:new l.NI(null,[l.kI.required,l.kI.email]),password:new l.NI(null,[l.kI.required,l.kI.pattern(/^[A-Za-z0-9]{6,15}$/)])}),null!==localStorage.getItem("userToken")&&e.navigate(["/home"])}handleLogin(i){this.isLoading=!0,i.valid&&this._AuthService.login(i.value).subscribe({next:e=>{"success"===e.message&&(this.isLoading=!1,localStorage.setItem("userToken",e.token),this._AuthService.decodeUserData(),this._AuthService.userName.subscribe({next:t=>{this.username=t,this._ToastrService.success(null!==this.username?` welcome ${this.username}`:" welcome Back")}}),this._Router.navigate(["/home"]))},error:e=>{this.isLoading=!1,this.apiError=e.error.message}})}clearApiError(){this.apiError=null}}return o.\u0275fac=function(i){return new(i||o)(n.Y36(c.e),n.Y36(m.F0),n.Y36(f._W))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:22,vars:15,consts:[[1,"mx-auto","my-5","form-login","bg-color","txt",3,"formGroup","ngSubmit"],[1,"title"],["class","alert alert-danger",4,"ngIf"],["for","email",1,"fw-bold","txt-color"],["type","text","id","email","placeholder","Email","formControlName","email",1,"form-control","my-2",3,"ngClass","input"],["class","alert alert-danger p-1",4,"ngIf"],["for","password",1,"fw-bold","txt-color"],["type","password","id","password","placeholder","password","formControlName","password",1,"form-control","my-2",3,"ngClass","input"],[1,"d-flex","justify-content-center","align-items-center","pt-2","flex-column"],["routerLink","/forgotPassword","routerLinkActive","text-decoration-underline",1,"text-main","my-3","fs-6","text-decoration-underline"],[1,"signup","fs-6","txt-grey"],["routerLink","/signup",1,"text-main"],["type","submit",1,"btn","bg-main","text-white",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"m-0","p-0","text-danger"],[1,"alert","alert-danger","p-1"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"],[1,"fa","fa-spinner","fa-spin"]],template:function(i,e){if(1&i&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return e.handleLogin(e.loginForm)}),n.TgZ(1,"h3",1),n._uU(2,"Login"),n.qZA(),n.YNc(3,h,3,1,"div",2),n.TgZ(4,"label",3),n._uU(5,"Email:"),n.qZA(),n.TgZ(6,"input",4),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(7,L,3,2,"div",5),n.TgZ(8,"label",6),n._uU(9,"password:"),n.qZA(),n.TgZ(10,"input",7),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(11,A,3,2,"div",5),n.TgZ(12,"div",8)(13,"a",9),n._uU(14,"Forgot Your Password?"),n.qZA(),n.TgZ(15,"p",10),n._uU(16," Don't have an account? "),n.TgZ(17,"a",11),n._uU(18,"Sign up"),n.qZA()(),n.TgZ(19,"button",12),n.YNc(20,C,1,0,"i",13),n.YNc(21,I,2,0,"span",14),n.qZA()()()),2&i){let t,u,s,g;n.Q6J("formGroup",e.loginForm),n.xp6(3),n.Q6J("ngIf",e.apiError),n.xp6(3),n.Q6J("ngClass",n.WLB(9,d,(null==(t=e.loginForm.get("email"))?null:t.invalid)&&(null==(t=e.loginForm.get("email"))?null:t.touched),(null==(t=e.loginForm.get("email"))?null:t.valid)&&(null==(t=e.loginForm.get("email"))?null:t.touched))),n.xp6(1),n.Q6J("ngIf",(null==(u=e.loginForm.get("email"))?null:u.errors)&&(null==(u=e.loginForm.get("email"))?null:u.touched)),n.xp6(3),n.Q6J("ngClass",n.WLB(12,d,(null==(s=e.loginForm.get("password"))?null:s.invalid)&&(null==(s=e.loginForm.get("password"))?null:s.touched),(null==(s=e.loginForm.get("password"))?null:s.valid)&&(null==(s=e.loginForm.get("password"))?null:s.touched))),n.xp6(1),n.Q6J("ngIf",(null==(g=e.loginForm.get("password"))?null:g.errors)&&(null==(g=e.loginForm.get("password"))?null:g.touched)),n.xp6(8),n.Q6J("disabled",e.loginForm.invalid),n.xp6(1),n.Q6J("ngIf",e.isLoading),n.xp6(1),n.Q6J("ngIf",!e.isLoading)}},dependencies:[p.ez,p.mk,p.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,m.rH,m.Od]}),o})()}}]);